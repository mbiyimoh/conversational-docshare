@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* 33 Strategies Dark Theme */
    --color-bg: 240 20% 4%;           /* #0a0a0f */
    --color-bg-elevated: 240 18% 5%;   /* #0d0d14 */
    --color-bg-card: 0 0% 100% / 0.03; /* rgba(255,255,255,0.03) */

    /* Text Hierarchy */
    --color-text: 0 0% 96%;            /* #f5f5f5 */
    --color-text-muted: 0 0% 53%;      /* #888888 */
    --color-text-dim: 0 0% 33%;        /* #555555 */

    /* Gold Accent */
    --color-accent: 41 57% 54%;        /* #d4a54a */
    --color-accent-glow: 41 57% 54% / 0.3;

    /* Borders */
    --color-border: 0 0% 100% / 0.08;

    /* Semantic Colors */
    --color-success: 142 69% 58%;      /* #4ade80 */
    --color-info: 217 91% 68%;         /* #60a5fa */
    --color-purple: 270 91% 65%;       /* #a78bfa */
    --color-warning: 38 92% 50%;       /* #f59e0b */
    --color-destructive: 0 84% 60%;    /* #f87171 */

    /* Typography */
    --font-display: "Instrument Serif", Georgia, serif;
    --font-body: "DM Sans", -apple-system, sans-serif;
    --font-mono: "JetBrains Mono", monospace;

    /* Spacing */
    --radius: 0.75rem;

    /* Legacy shadcn compatibility */
    --background: var(--color-bg);
    --foreground: var(--color-text);
    --card: var(--color-bg-card);
    --card-foreground: var(--color-text);
    --primary: var(--color-accent);
    --primary-foreground: var(--color-bg);
    --secondary: var(--color-bg-elevated);
    --secondary-foreground: var(--color-text);
    --muted: var(--color-bg-elevated);
    --muted-foreground: var(--color-text-muted);
    --accent: var(--color-accent);
    --accent-foreground: var(--color-bg);
    --destructive: var(--color-destructive);
    --destructive-foreground: var(--color-text);
    --border: var(--color-border);
    --input: var(--color-border);
    --ring: var(--color-accent);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-body;
  }
}

/* Backdrop filter fallback */
@supports not (backdrop-filter: blur(4px)) {
  .backdrop-blur-sm {
    background: rgba(20, 20, 30, 0.95) !important;
  }
}

/* Citation Highlight Animation - Updated for dark theme */
@keyframes citation-glow {
  0% {
    background-color: hsl(var(--color-accent) / 0.3);
    box-shadow: 0 0 0 4px hsl(var(--color-accent) / 0.2);
  }
  70% {
    background-color: hsl(var(--color-accent) / 0.3);
    box-shadow: 0 0 0 4px hsl(var(--color-accent) / 0.2);
  }
  100% {
    background-color: transparent;
    box-shadow: none;
  }
}

.citation-highlight {
  animation: citation-glow 2.5s ease-out forwards;
  border-radius: 0.25rem;
  transition: background-color 0.3s ease-out, box-shadow 0.3s ease-out;
}

@media (prefers-reduced-motion: reduce) {
  .citation-highlight {
    animation: none;
    background-color: hsl(var(--color-accent) / 0.2);
    border-left: 4px solid hsl(var(--color-accent));
    box-shadow: none;
  }
}
